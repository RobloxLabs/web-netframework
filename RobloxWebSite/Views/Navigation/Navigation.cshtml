@using Roblox.Website.ViewModels.Navigation
@model NavigationViewModel          
@{ 
    RobloxCSS.PageCSS.Add("PartialViews/Navigation.css");
}
<div class="site-header" >
    <div id="navigation-container">
        <a href="/Default.aspx" class="btn-logo" data-se="nav-logo"></a>
        <div id="navigation-menu">
            <ul>
                <li><a href="/home" ref="nav-myroblox" data-se="nav-myhome">@Model.LangResourceSet["Label.sHome"]</a></li>
                <li><a data-se="nav-games" href="/games" ref="nav-games" title="@Model.LangResourceSet["Label.sGames"]">@Model.LangResourceSet["Label.sGames"]</a> </li>
                <li><a data-se="nav-catalog" href="/Catalog" ref="nav-catalog" title="@Model.LangResourceSet["Label.sCatalog"]">@Model.LangResourceSet["Label.sCatalog"]</a></li>
                
                <li><a data-se="nav-leaderboards" href="/leaderboards" title="@Model.LangResourceSet["Label.sLeaderboards"]" ref="nav-leaderboards">@Model.LangResourceSet["Label.sLeaderboards"]</a></li>
                
                <li><a data-se="nav-upgrade" href="/Upgrades/BuildersClubMemberships.aspx" title="@Model.LangResourceSet["Label.sBuildersClub"]" ref="nav-buildersclub">@Model.LangResourceSet["Label.sBuildersClub"]</a></li>
                <li><a data-se="nav-forum" onclick='' href="/Forum/Default.aspx" style='' title="@Model.LangResourceSet["Label.sForum"]" ref="nav-forum">@Model.LangResourceSet["Label.sForum"]</a></li>
                <li class="more-list-item" drop-down-nav-button="more-list-item">
                    <div class="more-link-container">
                        <a id="nav-more" title="@Model.LangResourceSet["Label.sMore"]" data-se="nav-more" ref="nav-more">@Model.LangResourceSet["Label.sMore"]<span id="more-menu-toggle"></span></a> 
                    </div>
                    <div class="dropdownnavcontainer" style="display:none;" drop-down-nav-container="more-list-item">
                        <div class="dropdownmainnav" style="z-index:1023">
                            <a class="dropdownoption" data-se="nav-more-browse" href="/Browse.aspx" title="@Model.LangResourceSet["Label.sPeople"]" ref="nav-people"><span>@Model.LangResourceSet["Label.sPeople"]</span></a>
                            <a class="dropdownoption roblox-interstitial" data-se="nav-more-blog" href="http://blog.roblox.com" title="@Model.LangResourceSet["Label.sBlog"]" ref="nav-news"><span>@Model.LangResourceSet["Label.sBlog"]</span></a>
                            <a class="dropdownoption" data-se="nav-more-help" href="/Help/Builderman.aspx" title="@Model.LangResourceSet["Label.Help"]" ref="nav-help"><span>@Model.LangResourceSet["Label.Help"]</span></a>
                            <div style="clear:both;"></div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        @if (Request.IsAuthenticated)
        {
            @Html.Partial("~/Views/Navigation/AlertsAndOptions.cshtml", new AlertsAndOptionsViewModel(Model.User))
        }
        else
        {
            @Html.Partial("~/Views/Navigation/SignupOrLogin.cshtml")
        }
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('.more-list-item').bind('showDropDown', function () {
            var maxWidth = $('#navigation-menu .dropdownnavcontainer').width();
            $('a.dropdownoption span').each(function (index, elem) {
                elem = $(elem);
                if (elem.outerWidth() > maxWidth) {
                    maxWidth = elem.outerWidth();
                }
            });
            maxWidth = maxWidth + 5;
            $('#navigation-menu .dropdownoption').each(function (index, elem) {
                elem = $(elem);
                if (elem.width() < maxWidth) {
                    elem.width(maxWidth);
                }
            });
        });
    });
    
    
</script>